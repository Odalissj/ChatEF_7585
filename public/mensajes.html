<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Enviar Mensaje</title>

  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />

  <style>
    .chat-container {
      height: 90vh;
      max-height: 90vh;
    }

    .chat-list {
      height: 100%;
      max-height: 100%;
      overflow-y: auto;
      border-left: 1px solid #ddd;
      padding-left: 15px;
    }
  </style>
</head>

<body class="bg-light">

  <div class="container py-4">
    <div class="row chat-container shadow-sm bg-white rounded p-3">

      <!-- ===================== -->
      <!--   COLUMNA IZQUIERDA   -->
      <!-- ===================== -->
      <div class="col-md-5 pe-4">
        <h3 class="text-center mb-1">Enviar Mensaje</h3>
        <p class="text-center text-muted mb-4">
          Formulario protegido con Token Bearer (Serie II).
        </p>

        <!-- Info de usuario -->
        <div class="mb-3">
          <label class="form-label">Usuario autenticado</label>
          <input
            type="text"
            class="form-control"
            id="loginEmisor"
            readonly
          />
        </div>

        <!-- Formulario de mensaje -->
        <form id="messageForm">

          <div class="mb-3">
            <label for="codSala" class="form-label">Código de sala</label>
            <input
              type="number"
              class="form-control"
              id="codSala"
              value="0"
              min="0"
            />
          </div>

          <div class="mb-3">
            <label for="contenido" class="form-label">Mensaje</label>
            <textarea
              class="form-control"
              id="contenido"
              rows="4"
              placeholder="Escriba su mensaje aquí..."
              required
            ></textarea>
          </div>

          <button type="submit" class="btn btn-primary w-100">
            Enviar mensaje
          </button>

        </form>

        <!-- Mensajes de estado -->
        <div id="messageStatus" class="mt-3"></div>
      </div>


      <!-- ===================== -->
      <!--   COLUMNA DERECHA     -->
      <!-- ===================== -->
      <div class="col-md-7 chat-list">

        <h5 class="mb-3">Historial de mensajes</h5>

        <!-- LISTA DE MENSAJES -->
        <div id="listaMensajes" class="list-group small">
          <!-- Aquí se llenará con JS -->
        </div>

      </div>

    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="./js/mensajes.js"></script>

</body>
</html>
